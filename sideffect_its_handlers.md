# Android Compose - Side Effect рж╕ржорзНржкрзВрж░рзНржг ржЧрж╛ржЗржб ЁЯОп

## рж╕рзВржЪрж┐ржкрждрзНрж░

1. [Side Effect ржХрзА?](#1-side-effect-ржХрзА)
2. [ржХрзЗржи Side Effect ржжрж░ржХрж╛рж░?](#2-ржХрзЗржи-side-effect-ржжрж░ржХрж╛рж░)
3. [ржкрзНрж░ржзрж╛ржи рзйржЯрж┐ Side Effect Handler](#3-ржкрзНрж░ржзрж╛ржи-рзйржЯрж┐-side-effect-handler)
4. [рж╕ржорзНржкрзВрж░рзНржг рзоржЯрж┐ Side Effect API](#4-рж╕ржорзНржкрзВрж░рзНржг-рзоржЯрж┐-side-effect-api)
5. [ржмрж╛рж╕рзНрждржм ржЙржжрж╛рж╣рж░ржг](#5-ржмрж╛рж╕рзНрждржм-ржЙржжрж╛рж╣рж░ржг)
6. [ржПржХ ржиржЬрж░рзЗ ржкрж╛рж░рзНржержХрзНржп](#6-ржПржХ-ржиржЬрж░рзЗ-ржкрж╛рж░рзНржержХрзНржп)

---

## 1. Side Effect ржХрзА?

ржЕрзНржпрж╛ржирзНржбрзНрж░ржпрж╝рзЗржб ржХржорзНржкрзЛржЬрзЗ Side Effect ржмрж╛ ржкрж╛рж░рзНрж╢рзНржмржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛ ржмрж┐рж╖ржпрж╝ржЯрж┐ ржЕрждрзНржпржирзНржд ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржХрж╛рж░ржг ржПржЯрж┐ ржЫрж╛ржбрж╝рж╛ ржЖржкржирж┐ рж░рж┐ржпрж╝рзЗрж▓-ржУржпрж╝рж╛рж░рзНрж▓рзНржб ржЕрзНржпрж╛ржк (ржпрзЗржоржи: API ржХрж▓ ржХрж░рж╛, ржбрж╛ржЯрж╛ржмрзЗржЬ ржЖржкржбрзЗржЯ ржмрж╛ ржЯрж╛ржЗржорж╛рж░ ржЪрж╛рж▓рж╛ржирзЛ) рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи ржирж╛ред

### рж╕рж╣ржЬ ржнрж╛рж╖рж╛ржпрж╝:

**ржХржорзНржкрзЛржЬрзЗрж░ Composition (UI рж░рзЗржирзНржбрж╛рж░ ржХрж░рж╛) ржкрзНрж░рж╕рзЗрж╕рзЗрж░ ржмрж╛ржЗрж░рзЗ ржпрж╛ ржХрж┐ржЫрзБ ржШржЯрзЗ, рждрж╛ржХрзЗржЗ Side Effect ржмрж▓рзЗред**

ржХржорзНржкрзЛржЬ ржлрж╛ржВрж╢ржирзЗрж░ ржкрзНрж░ржзрж╛ржи ржХрж╛ржЬ рж╣рж▓рзЛ ржбрж╛ржЯрж╛ ржЧрзНрж░рж╣ржг ржХрж░рж╛ ржПржмржВ UI ржжрзЗржЦрж╛ржирзЛред ржХрж┐ржирзНрждрзБ ржпржжрж┐ ржЖржкржирж┐ ржХржорзНржкрзЛржЬ ржлрж╛ржВрж╢ржирзЗрж░ ржнрзЗрждрж░рзЗ ржПржоржи ржХрж┐ржЫрзБ ржХрж░рзЗржи ржпрж╛ UI DRAWING ржПрж░ рж╕рж╛ржерзЗ рж╕рж░рж╛рж╕рж░рж┐ ржпрзБржХрзНржд 
ржиржпрж╝ (ржпрзЗржоржи: ржмрзНрж▓рзБржЯрзБрже ржЕржи ржХрж░рж╛, ржЯрзЛрж╕рзНржЯ ржорзЗрж╕рзЗржЬ ржжрзЗржЦрж╛ржирзЛ, ржмрж╛ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржбрж╛ржЯрж╛ ржкрж╛ржарж╛ржирзЛ), рждржмрзЗ рж╕рзЗржЯрж╛ржЗ рж╕рж╛ржЗржб ржЗржлрзЗржХрзНржЯред

---

## 2. ржХрзЗржи Side Effect ржжрж░ржХрж╛рж░?

### ржХрзЗржи ржПржЧрзБрж▓рзЛ рж╕рж░рж╛рж╕рж░рж┐ ржХржорзНржкрзЛржЬ ржлрж╛ржВрж╢ржирзЗ рж▓рзЗржЦрж╛ ржпрж╛ржпрж╝ ржирж╛?

ржХржорзНржкрзЛржЬ ржлрж╛ржВрж╢ржи ржпрзЗржХрзЛржирзЛ рж╕ржоржпрж╝ Re-compose рж╣рждрзЗ ржкрж╛рж░рзЗ (рж╕рзЗржХрзЗржирзНржбрзЗ рж╣ржпрж╝рждрзЛ рзмрзж ржмрж╛рж░)ред 

**рж╕ржорж╕рзНржпрж╛:**
- ржЖржкржирж┐ ржпржжрж┐ рж╕рж╛ржзрж╛рж░ржг ржПржХржЯрж┐ ржлрж╛ржВрж╢ржирзЗрж░ ржнрзЗрждрж░ API ржХрж▓ рж▓рж┐ржЦрзЗ ржжрзЗржи
- рждржмрзЗ ржкрзНрж░рждрж┐ржмрж╛рж░ UI ржЖржкржбрзЗржЯ рж╣ржУржпрж╝рж╛рж░ рж╕ржоржпрж╝ ржмрж╛рж░ржмрж╛рж░ рж╕рзЗржЗ API ржХрж▓ рж╣рждрзЗ ржерж╛ржХржмрзЗ
- ржпрж╛ ржЕрзНржпрж╛ржкржХрзЗ рж╕рзНрж▓рзЛ ржХрж░рзЗ ржжрзЗржмрзЗ ржПржмржВ ржмрзНржпрж╛ржЯрж╛рж░рж┐ ржирж╖рзНржЯ ржХрж░ржмрзЗ

**рж╕ржорж╛ржзрж╛ржи:**
ржПржЗ "ржЕржкрзНрж░рждрзНржпрж╛рж╢рж┐ржд ржЖржЪрж░ржг" ржерзЗржХрзЗ ржмрж╛ржБржЪрждрзЗржЗ рж╕рж╛ржЗржб ржЗржлрзЗржХрзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ ржжрж░ржХрж╛рж░ред

---

## 3. ржкрзНрж░ржзрж╛ржи рзйржЯрж┐ Side Effect Handler

### рзз. LaunchedEffect (рж╕ржмржЪрзЗржпрж╝рзЗ ржмрзЗрж╢рж┐ ржмрзНржпржмрж╣рзГржд)

ржПржЯрж┐ ржХрзЛржирзЛ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж╛ржЬрзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ ржпрж╛ ржЖржкржирж┐ ржХржорзНржкрзЛржЬрж┐рж╢ржи рж╢рзБрж░рзБ рж╣ржУржпрж╝рж╛рж░ рж╕ржоржпрж╝ ржХрж░рждрзЗ ржЪрж╛ржиред

**ржХрзЗржи ржжрж░ржХрж╛рж░:** ржХрзЛрж░рзБрж╢рж┐ржи (Coroutine) ржЪрж╛рж▓рж╛ржирзЛрж░ ржЬржирзНржпред

**ржХрж╛ржЬ:** ржПржЯрж┐ ржПржХржЯрж┐ ржХрж┐ (Key) ржирзЗржпрж╝ред ржХрж┐ ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ ржПржЯрж┐ ржЖржмрж╛рж░ рж░рж╛ржи ржХрж░рзЗред

**ржЙржжрж╛рж╣рж░ржг:** рж╕рзНржХрзНрж░рж┐ржирзЗ ржврзЛржХрж╛рж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржбрж╛ржЯрж╛ рж▓рзЛржб ржХрж░рж╛ред

```kotlin
@Composable
fun UserProfile(userId: String) {
    LaunchedEffect(userId) { // userId ржЪрзЗржЮрзНржЬ рж╣рж▓рзЗ ржЖржмрж╛рж░ ржбрж╛ржЯрж╛ рж▓рзЛржб рж╣ржмрзЗ
        val user = repository.loadUser(userId) // ржПржЯрж╛ ржПржХржЯрж╛ рж╕рж╛рж╕ржкрзЗржирзНржб ржлрж╛ржВрж╢ржи
        println("User loaded: $user")
    }
}
```

---

### рзи. SideEffect (рж╕ржмржЪрзЗржпрж╝рзЗ рж╕рж┐ржорзНржкрж▓)

ржПржЯрж┐ ржкрзНрж░рждрж┐ржмрж╛рж░ рж╕ржлрж▓ Re-composition рж╣ржУржпрж╝рж╛рж░ ржкрж░ рж░рж╛ржи ржХрж░рзЗред

**ржХрзЗржи ржжрж░ржХрж╛рж░:** ржХржорзНржкрзЛржЬрзЗрж░ рж╕рзНржЯрзЗржЯржХрзЗ ржмрж╛ржЗрж░рзЗрж░ ржХрзЛржирзЛ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ (ржпрзЗржоржи: Analytics ржмрж╛ Bluetooth) рж╕рж╛ржерзЗ рж╕рж┐ржЩрзНржХ ржХрж░рж╛рж░ ржЬржирзНржпред

**ржЙржжрж╛рж╣рж░ржг:** ржкрзНрж░рждрж┐ржмрж╛рж░ UI ржЖржкржбрзЗржЯ рж╣рж▓рзЗ ржПржХржЯрж┐ рж▓ржЧ ржкрж╛ржарж╛ржирзЛред

```kotlin
@Composable
fun MyScreen(user: User) {
    SideEffect {
        // ржкрзНрж░рждрж┐ржмрж╛рж░ UI рж╕ржлрж▓ржнрж╛ржмрзЗ ржбрзНрж░ рж╣ржУржпрж╝рж╛рж░ ржкрж░ ржПржЯрж┐ ржХрж╛ржЬ ржХрж░ржмрзЗ
        analytics.trackUserView(user.name)
    }
}
```

---

### рзй. DisposableEffect (ржХрзНрж▓рж┐ржи-ржЖржк ржХрж░рж╛рж░ ржЬржирзНржп)

ржПржоржи ржХрзЛржирзЛ ржЗржлрзЗржХрзНржЯ ржпрж╛ ржмржирзНржз ржХрж░рж╛рж░ ржкрзНрж░ржпрж╝рзЛржЬржи рж╣ржпрж╝ (ржпрзЗржоржи: рж▓рж┐рж╕рзЗржирж╛рж░ ржмрж╛ ржмрзНрж░ржбржХрж╛рж╕рзНржЯ рж░рж┐рж╕рж┐ржнрж╛рж░)ред

**ржХрзЗржи ржжрж░ржХрж╛рж░:** ржорзЗржорзЛрж░рж┐ рж▓рж┐ржХ (Memory Leak) ржмржирзНржз ржХрж░рж╛рж░ ржЬржирзНржпред

**ржХрж╛ржЬ:** ржПрж░ ржнрзЗрждрж░рзЗ ржПржХржЯрж┐ onDispose ржмрзНрж▓ржХ ржерж╛ржХрзЗ ржпрж╛ ржЗржлрзЗржХрзНржЯржЯрж┐ рж╢рзЗрж╖ рж╣ржУржпрж╝рж╛рж░ рж╕ржоржпрж╝ рж░рж╛ржи рж╣ржпрж╝ред

**ржЙржжрж╛рж╣рж░ржг:** ржмрзНрж▓рзБржЯрзБрже рж▓рж┐рж╕рзЗржирж╛рж░ рж╕рзЗржЯ ржХрж░рж╛ред

```kotlin
@Composable
fun BluetoothListener() {
    DisposableEffect(Unit) {
        val listener = MyBluetoothListener()
        listener.start()

        onDispose {
            listener.stop() // рж╕рзНржХрзНрж░рж┐ржи ржерзЗржХрзЗ ржЪрж▓рзЗ ржЧрзЗрж▓рзЗ рж▓рж┐рж╕рзЗржирж╛рж░ ржмржирзНржз ржХрж░рзЗ ржжрзЗржмрзЗ
        }
    }
}
```

---

## 4. рж╕ржорзНржкрзВрж░рзНржг рзоржЯрж┐ Side Effect API

Jetpack Compose-ржП ржорзВрж▓ржд рзо ржзрж░ржирзЗрж░ Side-effect API ржЖржЫрзЗред ржирж┐ржЪрзЗ рж╕рзЗржЧрзБрж▓рзЛрж░ рж▓рж┐рж╕рзНржЯ ржПржмржВ рж╕ржВржХрзНрж╖рзЗржкрзЗ ржмрж░рзНржгржирж╛ ржжрзЗржУржпрж╝рж╛ рж╣рж▓рзЛ:

---

### рзз. LaunchedEffect

ржПржЯрж┐ ржПржХржЯрж┐ ржХрзЛрж░рзБрж╢рж┐ржи (Coroutine) рж╕рзНржХрзЛржк рждрзИрж░рж┐ ржХрж░рзЗред ржПржЯрж┐ ржорзВрж▓ржд рж╕рзНржХрзНрж░рж┐ржи рж▓рзЛржб рж╣ржУржпрж╝рж╛рж░ рж╕ржоржпрж╝ ржХрзЛржирзЛ ржУржпрж╝рж╛ржи-ржЯрж╛ржЗржо ржХрж╛ржЬ (ржпрзЗржоржи: API ржХрж▓ ржмрж╛ ржбрж╛ржЯрж╛ржмрзЗржЬ ржерзЗржХрзЗ ржбрж╛ржЯрж╛ ржЖржирж╛) ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред ржпржжрж┐ ржПрж░ key ржкрж░рж┐ржмрж░рзНрждржи рж╣ржпрж╝, рждржмрзЗ ржПржЯрж┐ ржЖржЧрзЗрж░ ржХрж╛ржЬ ржмржирзНржз ржХрж░рзЗ ржЖржмрж╛рж░ ржирждрзБржи ржХрж░рзЗ рж╢рзБрж░рзБ рж╣ржпрж╝ред

**ржмрзНржпржмрж╣рж╛рж░:**
```kotlin
LaunchedEffect(key) {
    // Suspend functions
}
```

---

### рзи. rememberCoroutineScope

ржПржЯрж┐ ржХржорзНржкрзЛржЬрж┐рж╢ржирзЗрж░ ржмрж╛ржЗрж░рзЗ (ржпрзЗржоржи: ржХрзЛржирзЛ ржмрж╛ржЯржирзЗрж░ onClick ржПрж░ ржнрзЗрждрж░рзЗ) ржХрзЛрж░рзБрж╢рж┐ржи ржЪрж╛рж▓рж╛ржирзЛрж░ ржЬржирзНржп ржПржХржЯрж┐ рж╕рзНржХрзЛржк ржжрзЗржпрж╝ред ржПржЯрж┐ ржорзВрж▓ржд ржЗржЙржЬрж╛рж░ ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХрж╢ржирзЗрж░ ржнрж┐рждрзНрждрж┐рждрзЗ ржХрзЛржирзЛ рж╕рж╛рж╕ржкрзЗржирзНржб ржлрж╛ржВрж╢ржи рж░рж╛ржи ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред

**ржмрзНржпржмрж╣рж╛рж░:**
```kotlin
val scope = rememberCoroutineScope()
Button(onClick = { 
    scope.launch { /* coroutine */ }
})
```

---

### рзй. rememberUpdatedState

ржПржЯрж┐ ржХрзЛржирзЛ ржнрзНржпрж╛рж▓рзБрж░ рж▓рзЗржЯрзЗрж╕рзНржЯ ржорж╛ржи ржзрж░рзЗ рж░рж╛ржЦрзЗ ржХрж┐ржирзНрждрзБ ржЗржлрзЗржХрзНржЯржХрзЗ (ржпрзЗржоржи LaunchedEffect) рж░рж┐рж╕рзНржЯрж╛рж░рзНржЯ ржХрж░рзЗ ржирж╛ред ржПржЯрж┐ рждржЦржи ржжрж░ржХрж╛рж░ рж╣ржпрж╝ ржпржЦржи ржХрзЛржирзЛ рж▓ржВ-рж░рж╛ржирж┐ржВ ржЕржкрж╛рж░рзЗрж╢ржирзЗрж░ ржорж╛ржЭржЦрж╛ржирзЗ ржнрзНржпрж╛рж▓рзБ ржЪрзЗржЮрзНржЬ рж╣рж▓рзЗржУ ржЖржкржирж┐ ржЕржкрж╛рж░рзЗрж╢ржиржЯрж┐ ржерж╛ржорж╛рждрзЗ ржЪрж╛ржи ржирж╛ред

**ржмрзНржпржмрж╣рж╛рж░:**
```kotlin
val currentValue by rememberUpdatedState(value)
```

---

### рзк. DisposableEffect

ржПржЯрж┐ ржПржоржи ржХрж╛ржЬрзЗрж░ ржЬржирзНржп ржпрж╛ рж╢рзЗрж╖ рж╣ржУржпрж╝рж╛рж░ ржкрж░ 'ржХрзНрж▓рж┐ржи-ржЖржк' ржХрж░рж╛ ржжрж░ржХрж╛рж░ (ржпрзЗржоржи: ржмрзНрж░ржбржХрж╛рж╕рзНржЯ рж░рж┐рж╕рж┐ржнрж╛рж░ ржмрж╛ рж╕рзЗржирзНрж╕рж░ рж▓рж┐рж╕рзЗржирж╛рж░)ред ржПрж░ ржнрзЗрждрж░рзЗ ржПржХржЯрж┐ onDispose ржмрзНрж▓ржХ ржерж╛ржХрзЗ ржпрж╛ рж╕рзНржХрзНрж░рж┐ржи ржерзЗржХрзЗ ржЪрж▓рзЗ ржпрж╛ржУржпрж╝рж╛рж░ рж╕ржоржпрж╝ рж░рж┐рж╕рзЛрж░рзНрж╕ ржлрзНрж░рж┐ ржХрж░рзЗ ржжрзЗржпрж╝ред

**ржмрзНржпржмрж╣рж╛рж░:**
```kotlin
DisposableEffect(key) {
    // Setup
    onDispose {
        // Cleanup
    }
}
```

---

### рзл. SideEffect

ржПржЯрж┐ ржкрзНрж░рждрж┐ржмрж╛рж░ рж╕ржлрж▓ рж░рж┐ржХржорзНржкрзЛржЬрж┐рж╢ржи (Re-composition) рж╣ржУржпрж╝рж╛рж░ ржкрж░ рж░рж╛ржи ржХрж░рзЗред ржПржЯрж┐ ржорзВрж▓ржд ржХржорзНржкрзЛржЬрзЗрж░ ржнрзЗрждрж░рзЗрж░ рж╕рзНржЯрзЗржЯржХрзЗ ржмрж╛ржЗрж░рзЗрж░ ржХрзЛржирзЛ ржиржи-ржХржорзНржкрзЛржЬ ржЕржмржЬрзЗржХрзНржЯрзЗрж░ (ржпрзЗржоржи: Analytics ржмрж╛ Bluetooth ржХрзНржпрж╛рж╢) рж╕рж╛ржерзЗ рж╕рж┐ржЩрзНржХ ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝ред

**ржмрзНржпржмрж╣рж╛рж░:**
```kotlin
SideEffect {
    // Runs after every successful recomposition
}
```

---

### рзм. produceState

ржПржЯрж┐ ржиржи-ржХржорзНржкрзЛржЬ рж╕рзНржЯрзЗржЯржХрзЗ (ржпрзЗржоржи: ржлрзНрж▓рзЛ ржмрж╛ ржПржХрзНрж╕ржЯрж╛рж░ржирж╛рж▓ ржбрж╛ржЯрж╛ рж╕рзЛрж░рзНрж╕) ржХржорзНржкрзЛржЬ рж╕рзНржЯрзЗржЯрзЗ рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рзЗред ржПржЯрж┐ ржорзВрж▓ржд ржПржХржЯрж┐ LaunchedEffect ржПрж░ ржорждрзЛ ржХрж╛ржЬ ржХрж░рзЗ ржпрж╛ рж╕рж░рж╛рж╕рж░рж┐ ржПржХржЯрж┐ State рж░рж┐ржЯрж╛рж░рзНржи ржжрзЗржпрж╝ред

**ржмрзНржпржмрж╣рж╛рж░:**
```kotlin
val state = produceState(initialValue) {
    value = loadData()
}
```

---

### рзн. derivedStateOf

ржПржЯрж┐ ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ рж╕рзНржЯрзЗржЯ ржерзЗржХрзЗ ржирждрзБржи ржПржХржЯрж┐ рж╕рзНржЯрзЗржЯ рждрзИрж░рж┐ ржХрж░рзЗред ржПржЯрж┐ рждржЦржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝ ржпржЦржи ржХрзЛржирзЛ рж╕рзНржЯрзЗржЯрзЗрж░ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржи ржЦрзБржм ржмрзЗрж╢рж┐ рж░рж┐рж╕рзЛрж░рзНрж╕ ржЦрж░ржЪ ржХрж░рзЗ, ржпрж╛рждрзЗ ржЕржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ рж░рж┐ржХржорзНржкрзЛржЬрж┐рж╢ржи ржХржорж╛ржирзЛ ржпрж╛ржпрж╝ред

**ржмрзНржпржмрж╣рж╛рж░:**
```kotlin
val derivedValue by remember {
    derivedStateOf {
        expensiveCalculation(state)
    }
}
```

---

### рзо. snapshotFlow

ржПржЯрж┐ ржХржорзНржкрзЛржЬрж┐рж╢ржирзЗрж░ ржХрзЛржирзЛ рж╕рзНржЯрзЗржЯржХрзЗ ржХрзЛрж▓рзНржб ржлрзНрж▓рзЛ-рждрзЗ (Cold Flow) рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рзЗред ржЕрж░рзНржерж╛рзО рж╕рзНржЯрзЗржЯрзЗрж░ ржнрзНржпрж╛рж▓рзБ ржпржЦржиржЗ ржЪрзЗржЮрзНржЬ рж╣ржмрзЗ, ржПржЯрж┐ рж╕рзЗржЗ ржирждрзБржи ржнрзНржпрж╛рж▓рзБржЯрж┐ ржПржХржЯрж┐ ржлрзНрж▓рзЛ ржЖржХрж╛рж░рзЗ ржкрж╛ржарж╛ржмрзЗ ржпрж╛ ржЖржкржирж┐ ржЕржкрж╛рж░рзЗржЯрж░ (ржпрзЗржоржи: filter, map) ржжрж┐ржпрж╝рзЗ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржиред

**ржмрзНржпржмрж╣рж╛рж░:**
```kotlin
LaunchedEffect(Unit) {
    snapshotFlow { state }
        .collect { value -> }
}
```

---

## 5. ржмрж╛рж╕рзНрждржм ржЙржжрж╛рж╣рж░ржг (Real World Use Case)

### ржзрж░рзБржи, ржЖржкржирж┐ ржПржХржЯрж┐ Chat App ржмрж╛ржирж╛ржЪрзНржЫрзЗржи:

#### рзз. LaunchedEffect - ржбрж╛ржЯрж╛ржмрзЗржЬ ржХрж╛ржирзЗржХрж╢ржи

ржЗржЙржЬрж╛рж░ ржпржЦржи ржЪрзНржпрж╛ржЯ рж╕рзНржХрзНрж░рж┐ржирзЗ ржврзБржХржмрзЗ, рждржЦржи ржЖржкржирж┐ ржПржХржЯрж┐ ржбрж╛ржЯрж╛ржмрзЗржЬ ржХрж╛ржирзЗржХрж╢ржи ржУржкрзЗржи ржХрж░ржмрзЗржи (LaunchedEffect) ржпрж╛ ржорзЗрж╕рзЗржЬ ржЖржиржмрзЗред

```kotlin
@Composable
fun ChatScreen(chatId: String) {
    LaunchedEffect(chatId) {
        database.openConnection(chatId)
        val messages = database.loadMessages(chatId)
        // Display messages
    }
}
```

---

#### рзи. SideEffect - ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи рж╕рж╛ржЙржирзНржб

ржкрзНрж░рждрж┐ржмрж╛рж░ ржирждрзБржи ржорзЗрж╕рзЗржЬ ржЖрж╕рж▓рзЗ ржПржмржВ UI рж▓рж┐рж╕рзНржЯ ржЖржкржбрзЗржЯ рж╣рж▓рзЗ ржЖржкржирж┐ ржПржХржЯрж┐ рж╕рж╛ржЙржирзНржб ржмрж╛ржЬрж╛ржмрзЗржи ржмрж╛ ржЕрзНржпрж╛ржирж╛рж▓рж┐ржЯрж┐ржХрзНрж╕ ржЖржкржбрзЗржЯ ржХрж░ржмрзЗржи (SideEffect)ред

```kotlin
@Composable
fun ChatMessages(messages: List<Message>) {
    SideEffect {
        if (messages.isNotEmpty()) {
            soundPlayer.playNotification()
            analytics.logMessageReceived()
        }
    }
    
    // Display messages UI
}
```

---

#### рзй. DisposableEffect - ржХрзНрж▓рж┐ржи-ржЖржк

ржЗржЙржЬрж╛рж░ ржпржЦржи ржЪрзНржпрж╛ржЯ рж╕рзНржХрзНрж░рж┐ржи ржерзЗржХрзЗ ржмрзЗрж░рж┐ржпрж╝рзЗ ржпрж╛ржмрзЗ, рждржЦржи ржбрж╛ржЯрж╛ржмрзЗржЬ ржХрж╛ржирзЗржХрж╢ржиржЯрж┐ ржмржирзНржз ржХрж░рждрзЗ рж╣ржмрзЗ (DisposableEffect -> onDispose) ржпрж╛рждрзЗ ржЕрзНржпрж╛ржк ржХрзНрж░рзНржпрж╛рж╢ ржирж╛ ржХрж░рзЗред

```kotlin
@Composable
fun ChatScreen(chatId: String) {
    DisposableEffect(chatId) {
        database.openConnection(chatId)
        
        onDispose {
            database.closeConnection(chatId)
        }
    }
}
```

---

## 6. ржПржХ ржиржЬрж░рзЗ ржкрж╛рж░рзНржержХрзНржп

| ржЗржлрзЗржХрзНржЯ | Coroutine рж╕рж╛ржкрзЛрж░рзНржЯ | ржХржЦржи рж░рж╛ржи рж╣ржпрж╝? | ржЙржжрзНржжрзЗрж╢рзНржп |
|--------|------------------|-------------|---------|
| **LaunchedEffect** | рж╣рзНржпрж╛ржБ (рж╕рж╛рж╕ржкрзЗржирзНржб ржлрж╛ржВрж╢ржи ржЪрж▓рзЗ) | ржХржорзНржкрзЛржЬрж┐рж╢ржирзЗрж░ рж╢рзБрж░рзБрждрзЗ/ржХрзА (Key) ржЪрзЗржЮрзНржЬ рж╣рж▓рзЗ | ржУржпрж╝рж╛ржи-ржЯрж╛ржЗржо ржЬржм ржмрж╛ ржбрж╛ржЯрж╛ рж▓рзЛржб |
| **rememberCoroutineScope** | рж╣рзНржпрж╛ржБ | Manual (onClick ржЗрждрзНржпрж╛ржжрж┐) | ржЗржЙржЬрж╛рж░ ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХрж╢ржи |
| **rememberUpdatedState** | ржирж╛ | ржкрзНрж░рждрж┐ recomposition | Latest value capture |
| **DisposableEffect** | ржирж╛ | ржХржорзНржкрзЛржЬрж┐рж╢ржирзЗрж░ рж╢рзБрж░рзБрждрзЗ | рж▓рж┐рж╕рзЗржирж╛рж░ ржХрзНрж▓рж┐ржи-ржЖржк ржмрж╛ рж░рж┐рж╕рзЛрж░рзНрж╕ ржлрзНрж░рж┐ ржХрж░рж╛ |
| **SideEffect** | ржирж╛ | ржкрзНрж░рждрж┐ржмрж╛рж░ рж░рж┐ржХржорзНржкрзЛржЬрж┐рж╢ржи рж╢рзЗрж╖ рж╣рж▓рзЗ | ржПржХрзНрж╕ржЯрж╛рж░ржирж╛рж▓ рж╕рзНржЯрзЗржЯ рж╕рж┐ржЩрзНржХ ржХрж░рж╛ |
| **produceState** | рж╣рзНржпрж╛ржБ | ржХржорзНржкрзЛржЬрж┐рж╢ржирзЗрж░ рж╢рзБрж░рзБрждрзЗ/Key ржЪрзЗржЮрзНржЬ рж╣рж▓рзЗ | Flow/External source тЖТ State |
| **derivedStateOf** | ржирж╛ | Dependency change рж╣рж▓рзЗ | Performance optimization |
| **snapshotFlow** | рж╣рзНржпрж╛ржБ | State change рж╣рж▓рзЗ | State тЖТ Flow conversion |

---

## рж╕рж╣ржЬ ржХржерж╛ржпрж╝ ржЯрж┐ржкрж╕

### ржХржЦржи ржХрзЛржиржЯрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи:

тЬЕ **ржХрзЛрж░рзБрж╢рж┐ржи ржжрж░ржХрж╛рж░ рж╣рж▓рзЗ:**
- `LaunchedEffect` ржмрж╛ `rememberCoroutineScope` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи

тЬЕ **рж▓рж┐рж╕рзЗржирж╛рж░ ржмрж╛ ржХрзНрж▓рж┐ржи-ржЖржк ржжрж░ржХрж╛рж░ рж╣рж▓рзЗ:**
- `DisposableEffect` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи

тЬЕ **ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржЕржкрзНржЯрж┐ржорж╛ржЗржЬ ржХрж░рждрзЗ:**
- `derivedStateOf` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи

тЬЕ **External system рж╕рж┐ржЩрзНржХ ржХрж░рждрзЗ:**
- `SideEffect` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи

тЬЕ **Flow ржерзЗржХрзЗ State рждрзИрж░рж┐ ржХрж░рждрзЗ:**
- `produceState` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи

тЬЕ **State ржерзЗржХрзЗ Flow рждрзИрж░рж┐ ржХрж░рждрзЗ:**
- `snapshotFlow` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи

тЬЕ **Latest value capture ржХрж░рждрзЗ (restart ржЫрж╛ржбрж╝рж╛):**
- `rememberUpdatedState` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи

---

## рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк

Side Effect Handler ржЫрж╛ржбрж╝рж╛ Android Compose ржП ржкрзНрж░ржлрзЗрж╢ржирж╛рж▓ ржЕрзНржпрж╛ржк рждрзИрж░рж┐ ржХрж░рж╛ ржЕрж╕ржорзНржнржмред ржкрзНрж░рждрж┐ржЯрж┐ Handler ржПрж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж╛ржЬ ржЖржЫрзЗ:

- **LaunchedEffect** = API calls, Data loading
- **rememberCoroutineScope** = User interactions
- **rememberUpdatedState** = Latest value, no restart
- **DisposableEffect** = Cleanup resources
- **SideEffect** = Sync external state
- **produceState** = Flow тЖТ State
- **derivedStateOf** = Performance optimization
- **snapshotFlow** = State тЖТ Flow

рж╕ржарж┐ржХ Handler ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржк:
- тЪб Fast рж╣ржмрзЗ
- ЁЯФЛ Battery efficient рж╣ржмрзЗ
- ЁЯТк Memory leak free рж╣ржмрзЗ
- тЬЕ Professional quality рж╣ржмрзЗ

---

**Happy Coding!** ЁЯЪА
